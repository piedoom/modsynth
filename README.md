# modsynth

`modsynth` is an implementation of [model
synthesis](https://paulmerrell.org/model-synthesis/) intended for use in interactive
applications like games. It can take a grid of arbitrary data and synthesize new
grids with local similarity. This is very similar/also known as "wave function
collapse" (wfc).

## Examples

### Input samples

```
ğŸŸ©ğŸŸ©âââğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸ ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ¨ğŸŸ¨ğŸŸ©ğŸŸª    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ¨ğŸŸ¨ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œ
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ¨ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œ
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸª
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ¨ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œ
ğŸŸªâğŸŸ«ğŸŸ«ğŸŸ«âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ¨ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œ
ğŸŸ©âğŸŸ«ğŸŸ«ğŸŸ«âğŸŸ©ââğŸŸ©    ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ââğŸŸ¦ğŸŸ¦â    ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ¦ğŸŸ¦ğŸŸ¦â    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ââğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸšƒğŸšƒğŸšƒğŸšƒğŸšƒğŸšƒğŸšƒğŸŸ©
ğŸŸ©ğŸŸ©âââğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸ©    ğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
```

### Output
```
ğŸŸ¦âğŸŸ©ğŸŸªâğŸŸ©ğŸŸªâ¬œ    â¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ¨ğŸŸ§    
âğŸŸ©ğŸŸªğŸŸ©ââğŸŸ©ğŸŸ©    ğŸŸ©ââğŸŸ¨ğŸŸ©ğŸŸ¨ğŸŸ¨ğŸŸ§  
âğŸŸ©ğŸŸªâğŸŸ¦ğŸŸ¦ââ    âğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸª  
ğŸŸ©ğŸŸ©ğŸŸªğŸŸ©âğŸŸ¦ââ    ââğŸŸ©ğŸŸªğŸŸªğŸŸ©âğŸŸ©  
âğŸŸ©ğŸŸªğŸŸªâğŸŸ«âğŸŸ©    ğŸŸ©ğŸŸ©ğŸŸ¨ğŸŸ©ğŸŸªâğŸŸ¦â  
ğŸŸ©ğŸŸªğŸŸªğŸŸªâğŸŸ¦âğŸŸ©    ââğŸŸ©ğŸŸ©ğŸŸ©âğŸŸ¦ğŸŸ¦  
ğŸŸªğŸŸªğŸŸªâ¬œğŸŸ©âğŸŸ©ğŸŸª    ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ââğŸŸ¦   
ğŸŸ§ğŸŸ§ğŸŸªâ¬œğŸŸ©ğŸŸ©ğŸŸªğŸŸª    ğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©â   

ğŸŸ¦ââââğŸŸ¦ââ    ğŸŸªğŸŸªğŸŸªâ¬œğŸŸ©ğŸŸªğŸŸ©ğŸŸ©
ğŸŸ¦ğŸŸ¦âğŸŸ©ââğŸŸ©ğŸŸ©    ğŸŸ§ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸ©ğŸŸ©â
âğŸŸ«ââğŸŸ¦ğŸŸ¦âğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªââğŸŸ¦
ğŸŸ¦ğŸŸ¦ââğŸŸ«ââğŸ     â¬œğŸŸ©ğŸŸªğŸŸ©ğŸŸ©âğŸŸ¦ğŸŸ¦
ââğŸŸ¦ğŸŸ¦ğŸŸ¦ââğŸŸ¨    ğŸŸ©âğŸŸ©âââğŸŸ«â
ğŸŸ©ğŸŸ©âğŸŸ«âğŸŸ¦âğŸŸ©    âğŸŸ¦âğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦
ğŸšƒğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦â    ğŸŸ¦âğŸŸ¦ğŸŸ¦ââğŸŸ«â
ğŸŸ©ğŸŸªâğŸŸ¦ğŸŸ¦âğŸŸ«â    âğŸŸ¦ğŸŸ¦ğŸŸ¦ââğŸŸ¦ğŸŸ¦
```

## Features / limitations

I want to implement everything here eventually.

- [x] synthesize from input samples (no need to specify constraints manually)
- [x] multiple sample support
    - [ ] multiple sample weight adjustments
- [ ] detection of grid boundaries when calculating probabilities (see [maze_2d](examples\README.md)
  example to see how the edge of the grid isn't properly synthesized)
- [ ] backtracking
- [ ] 3D support
- [ ] generation with smaller segments
- [ ] bevy integration

As it stands, it's pretty slow to generate and often fails, espcially at bigger
sizes. 