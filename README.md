# modsynth

`modsynth` is an implementation of [model
synthesis](https://paulmerrell.org/model-synthesis/) intended for use in interactive
applications like games. It can take a grid of arbitrary data and synthesize new
grids with local similarity. This is very similar/also known as "wave function
collapse" (wfc).

## Examples

### Input samples

```
ğŸŸ©ğŸŸ©âââğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸ ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ¨ğŸŸ¨ğŸŸ©ğŸŸª    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ¨ğŸŸ¨ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œ
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ¨ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œ
ğŸŸ©âğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸª
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ¨ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œ
ğŸŸªâğŸŸ«ğŸŸ«ğŸŸ«âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸ¨ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œ
ğŸŸ©âğŸŸ«ğŸŸ«ğŸŸ«âğŸŸ©ââğŸŸ©    ğŸŸ§ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ââğŸŸ¦ğŸŸ¦â    ğŸŸ§ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ¦ğŸŸ¦ğŸŸ¦â    ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©    ğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦âğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
ğŸŸ©âğŸŸ¦ğŸŸ¦ğŸŸ¦ââğŸŸ©ğŸŸ©ğŸŸ©    ğŸŸªğŸŸªğŸšƒğŸšƒğŸšƒğŸšƒğŸšƒğŸšƒğŸšƒğŸŸ©
ğŸŸ©ğŸŸ©âââğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸ©    ğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©
```

### Output
```
ğŸŸªğŸŸ©ğŸŸ¨ğŸŸ©ğŸŸªğŸŸªğŸŸªğŸŸ©ğŸŸ©ğŸŸ©âââğŸŸ©ğŸŸªğŸŸª
ğŸŸªâ¬œğŸŸ©âğŸŸ©ğŸŸ©ğŸŸªâ¬œâ¬œâ¬œğŸŸ©ğŸŸ©âğŸŸ©ğŸŸªğŸšƒ
ğŸŸªğŸŸªâ¬œğŸŸ©ğŸŸªğŸŸªğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ¨ğŸŸ©ğŸŸ©
ğŸŸªğŸŸªğŸŸªğŸŸ©ğŸŸªğŸŸªâğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªâ¬œâ¬œğŸŸ©ğŸŸªğŸŸ©
ğŸŸªğŸšƒğŸšƒğŸšƒğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ¨ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªâ¬œğŸŸ©ğŸŸ©
ğŸŸªğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸšƒğŸšƒğŸšƒğŸŸ©
ğŸŸªğŸŸªğŸŸªğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸªâ¬œâ¬œâ¬œâ¬œâ¬œ
ğŸŸªğŸŸ©ğŸŸªâ¬œâ¬œâ¬œâ¬œâ¬œğŸŸ©ğŸŸªğŸŸªâ¬œğŸŸ©ğŸŸ©ğŸŸªğŸŸª
ğŸŸªğŸŸªğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ¨ğŸŸ©ğŸŸªğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸª
ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸ©ğŸŸ©âğŸŸ¨ğŸŸ©ğŸŸªâğŸŸ©ğŸŸªğŸŸªğŸŸª
ğŸŸ§ğŸŸ§ğŸŸ§ğŸŸ§ğŸŸ§ğŸŸªğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ¨ğŸŸ§ğŸŸ§ğŸŸª
ğŸŸ¨ğŸŸ¨ğŸŸ¨ğŸŸ¨ğŸŸ§ğŸŸªğŸšƒğŸšƒğŸŸ©ğŸŸªğŸŸªâğŸŸ©ğŸŸªğŸŸªğŸŸª
ğŸŸ©ğŸŸ©ğŸŸ¨ğŸŸ©ğŸŸªğŸŸªâ¬œâ¬œğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸªğŸŸª
âğŸŸ¨ğŸŸ§ğŸŸªğŸŸªâ¬œâ¬œâ¬œğŸŸ©âââğŸŸ©ğŸŸªğŸŸ©ğŸŸª
ğŸŸ©ğŸŸ©ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸ©ğŸŸ©ğŸŸ©ââğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸª
ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸ©ğŸŸ©âğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸªğŸŸªğŸŸªâ¬œ
```

## Features / limitations

I want to implement everything here eventually.

- [x] synthesize from input samples (no need to specify constraints manually)
- [x] multiple sample support
    - [ ] multiple sample weight adjustments
- [ ] detection of grid boundaries when calculating probabilities (see [maze_2d](examples\README.md)
  example to see how the edge of the grid isn't properly synthesized)
- [x] simple backtracking
- [ ] 3D support
- [ ] generation with smaller segments
- [ ] bevy integration

As it stands, it's pretty slow to generate and often fails, espcially at bigger
sizes. 